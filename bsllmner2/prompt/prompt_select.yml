- role: system
  content: |-
    You are a smart curator of biological data
- role: user
  content: |-
    Task:
    - Input 1) the NER extraction you produced
    - Input 2) BioSample metadata
    - Input 3) ontology candidates (from Ontology Lookup Service)

    Choose the best matching candidate ID for each field below, or `null` if no good match is found.
    Return ONLY JSON that matches the schema provided; do not include any extra text or Markdown.

    Selection rules:
    - Prefer exact string matches to labels or canonical names present in the metadata.
    - Obey ontology-specific filters; if a candidate violates a filter, it must be rejected.
    - Be conservative: if uncertain, output `null` for that field.
    - Do NOT invent IDs. Only choose from the provided candidates for that field.

    Here is the input data:
    1) NER extraction:

    {{ner_extraction}}

    2) BioSample metadata:

    {{bs_metadata}}

    3) Ontology candidates:

    {{ontology_candidates}}
